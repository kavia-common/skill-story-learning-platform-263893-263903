{"is_source_file": true, "format": "JavaScript", "description": "This file provides a minimal API client for the Skill Story LMS frontend. It includes functions for fetching data, handling authentication tokens, fallback data, and API interaction methods such as fetching stories, episodes, progress, profile, and journal entries. It manages connection to backend services, fallback mechanisms, and supports testing/demonstration features.", "external_files": [], "external_methods": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem"], "published": ["api"], "classes": [], "methods": [{"name": "url(path)", "description": "Constructs a full API URL by appending the given path to the base URL from environment variables.", "scope": "", "scopeKind": ""}, {"name": "getToken()", "description": "Retrieves the stored authentication token from local storage.", "scope": "", "scopeKind": ""}, {"name": "setToken(token)", "description": "Stores or removes the authentication token in local storage.", "scope": "", "scopeKind": ""}, {"name": "request(input, init = {})", "description": "Performs a fetch request with JSON handling, authorization, demo headers, and error processing.", "scope": "", "scopeKind": ""}, {"name": "health()", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "issueToken(xDemoUser)", "scope": "api", "scopeKind": "class", "description": "unavailable"}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "request"], "search-terms": ["API client", "fetch wrapper", "fallback stories", "environment config", "auth token handling", "demo user header", "story episodes", "progress retrieval", "profile update", "journal entries"], "state": 2, "file_id": 13, "knowledge_revision": 43, "git_revision": "9bd30b60b90ceddc775a9c5830865317313ac7d7", "revision_history": [{"27": ""}, {"38": "8eab12752d7d4437e9e03637060e0207f5252480"}, {"43": "9bd30b60b90ceddc775a9c5830865317313ac7d7"}], "ctags": [{"_type": "tag", "name": "1", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^   1: [$/", "language": "JavaScript", "kind": "property", "scope": "FALLBACK_EPISODES", "scopeKind": "class"}, {"_type": "tag", "name": "2", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^   2: [$/", "language": "JavaScript", "kind": "property", "scope": "FALLBACK_EPISODES", "scopeKind": "class"}, {"_type": "tag", "name": "API_BASE_URL", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DEMO_USER", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ const DEMO_USER = process.env.REACT_APP_DEMO_USER || \"\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "FALLBACK_EPISODES", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ const FALLBACK_EPISODES = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "FALLBACK_STORIES", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ const FALLBACK_STORIES = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TOKEN_KEY", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ const TOKEN_KEY = \"skillstory.token\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ export const api = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "demo", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^       const demo = (FALLBACK_EPISODES[sid] || [])[idx];$/", "language": "JavaScript", "kind": "constant", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "getToken", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ function getToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^   async health() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^       const idx = Number(epIndex);$/", "language": "JavaScript", "kind": "constant", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "issueToken", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^   async issueToken(xDemoUser) {$/", "language": "JavaScript", "kind": "method", "signature": "(xDemoUser)", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^     const path =$/", "language": "JavaScript", "kind": "constant", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ async function request(input, init = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(input, init = {})"}, {"_type": "tag", "name": "setToken", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^   setToken,$/", "language": "JavaScript", "kind": "field", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "setToken", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ function setToken(token) {$/", "language": "JavaScript", "kind": "function", "signature": "(token)"}, {"_type": "tag", "name": "sid", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^       const sid = Number(storyId);$/", "language": "JavaScript", "kind": "constant", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/skill-story-learning-platform-263893-263903/skill_story_frontend/src/api/client.js", "pattern": "/^ function url(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}], "hash": "19a8a661cee30cbe301253fbcdfdce64", "format-version": 4, "code-base-name": "skill_story_frontend", "filename": "skill_story_frontend/src/api/client.js", "fields": [{"name": "1: [", "scope": "FALLBACK_EPISODES", "scopeKind": "class", "description": "unavailable"}, {"name": "2: [", "scope": "FALLBACK_EPISODES", "scopeKind": "class", "description": "unavailable"}, {"name": "setToken,", "scope": "api", "scopeKind": "class", "description": "unavailable"}]}